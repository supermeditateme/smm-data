{"version":3,"file":"annotations.js","sources":["../../../../js/lib/selectors/annotations.js"],"sourcesContent":["import { createSelector } from 'reselect';\nimport { SEGMENT_DURATION } from '../constants';\nimport { getCurrentSegmentRange } from './navigation';\n\nexport const getVisibleAnnotations = createSelector(\n  state => state.annotations.list,\n  getCurrentSegmentRange,\n  (annotationsList, segmentRange) => {\n    const rangeStart = SEGMENT_DURATION * segmentRange[0];\n    const rangeEnd =\n      SEGMENT_DURATION * segmentRange[segmentRange.length - 1] +\n      SEGMENT_DURATION;\n\n    return annotationsList.filter(annotation => {\n      const { time, duration } = annotation;\n      return time < rangeEnd || time + duration > rangeStart;\n    });\n  }\n);\n\nexport const getVisibleAnnotationsWithCoordinates = createSelector(\n  state => state.presentation.scrollerWidth / state.navigation.epochSize,\n  getVisibleAnnotations,\n  (secondWidth, visibleAnnotations) =>\n    visibleAnnotations.map(annotation => ({\n      annotation,\n      startX: annotation.time * secondWidth,\n      width: annotation.duration * secondWidth,\n    }))\n);\n\nexport const getSelectedAnnotation = createSelector(\n  state => state.annotations.list,\n  state => state.annotations.selected,\n  (annotationsList, selected) =>\n    annotationsList.find(annotation => annotation.id === selected)\n);\n\nexport const getSortedAnnotations = createSelector(\n  state => state.annotations.list,\n  annotationsList =>\n    annotationsList.sort(function(a, b) {\n      return a.time - b.time;\n    })\n);\n"],"names":["getVisibleAnnotations","createSelector","state","annotations","list","getCurrentSegmentRange","annotationsList","segmentRange","rangeStart","SEGMENT_DURATION","rangeEnd","length","filter","time","annotation","duration","getVisibleAnnotationsWithCoordinates","presentation","scrollerWidth","navigation","epochSize","secondWidth","visibleAnnotations","map","getSelectedAnnotation","selected","find","id","getSortedAnnotations","sort","a","b"],"mappings":";;;;IAIaA,wBAAwBC,eACnC;SAASC,MAAMC,WAAN,CAAkBC,IAA3B;CADmC,EAEnCC,sBAFmC,EAGnC,UAACC,eAAD,EAAkBC,YAAlB,EAAmC;MAC3BC,aAAaC,mBAAmBF,aAAa,CAAb,CAAtC;MACMG,WACJD,mBAAmBF,aAAaA,aAAaI,MAAb,GAAsB,CAAnC,CAAnB,GACAF,gBAFF;;SAIOH,gBAAgBM,MAAhB,CAAuB,sBAAc;QAClCC,IADkC,GACfC,UADe,CAClCD,IADkC;QAC5BE,QAD4B,GACfD,UADe,CAC5BC,QAD4B;;WAEnCF,OAAOH,QAAP,IAAmBG,OAAOE,QAAP,GAAkBP,UAA5C;GAFK,CAAP;CATiC,CAA9B;;AAgBP,IAAaQ,uCAAuCf,eAClD;SAASC,MAAMe,YAAN,CAAmBC,aAAnB,GAAmChB,MAAMiB,UAAN,CAAiBC,SAA7D;CADkD,EAElDpB,qBAFkD,EAGlD,UAACqB,WAAD,EAAcC,kBAAd;SACEA,mBAAmBC,GAAnB,CAAuB;WAAe;4BAAA;cAE5BT,WAAWD,IAAX,GAAkBQ,WAFU;aAG7BP,WAAWC,QAAX,GAAsBM;KAHR;GAAvB,CADF;CAHkD,CAA7C;;AAWP,IAAaG,wBAAwBvB,eACnC;SAASC,MAAMC,WAAN,CAAkBC,IAA3B;CADmC,EAEnC;SAASF,MAAMC,WAAN,CAAkBsB,QAA3B;CAFmC,EAGnC,UAACnB,eAAD,EAAkBmB,QAAlB;SACEnB,gBAAgBoB,IAAhB,CAAqB;WAAcZ,WAAWa,EAAX,KAAkBF,QAAhC;GAArB,CADF;CAHmC,CAA9B;;AAOP,IAAaG,uBAAuB3B,eAClC;SAASC,MAAMC,WAAN,CAAkBC,IAA3B;CADkC,EAElC;SACEE,gBAAgBuB,IAAhB,CAAqB,UAASC,CAAT,EAAYC,CAAZ,EAAe;WAC3BD,EAAEjB,IAAF,GAASkB,EAAElB,IAAlB;GADF,CADF;CAFkC,CAA7B;;;;"}