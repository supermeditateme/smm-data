{"version":3,"file":"navigation.js","sources":["../../../../js/lib/selectors/navigation.js"],"sourcesContent":["import { createSelector } from 'reselect';\nimport { PRELOAD_SEGMENTS, SEGMENT_DURATION } from '../constants';\n\nexport const getCurrentPosition = createSelector(\n  state => state.navigation.currentTime,\n  state => state.presentation.scrollerWidth,\n  state => state.navigation.epochSize,\n  (currentTime, scrollerWidth, epochSize) =>\n    scrollerWidth * currentTime / epochSize\n);\n\nexport const getCurrentSegment = createSelector(\n  state => state.navigation.currentTime,\n  currentTime => Math.floor(currentTime / SEGMENT_DURATION)\n);\n\nexport const getCurrentSegmentRange = createSelector(\n  state => state.header,\n  getCurrentSegment,\n  (header, currentSegment) => {\n    const result = [];\n\n    const { dataRecordsNumber = 0, dataRecordDuration = 0 } = header;\n    const startSegment = Math.max(\n      0,\n      currentSegment - Math.trunc(PRELOAD_SEGMENTS / 2)\n    );\n    // maxSegment and endSegment are inclusive.\n    const maxSegment = Math.ceil(\n      dataRecordsNumber * dataRecordDuration / SEGMENT_DURATION\n    );\n    const endSegment = Math.min(\n      maxSegment,\n      startSegment + PRELOAD_SEGMENTS - 1\n    );\n\n    for (let i = startSegment; i <= endSegment; i++) {\n      result.push(i);\n    }\n\n    return result;\n  }\n);\n\nexport const getFileDuration = createSelector(\n  state => state.header.dataRecordsNumber,\n  state => state.header.dataRecordDuration,\n  (dataRecordsNumber = 0, dataRecordDuration = 0) =>\n    dataRecordsNumber * dataRecordDuration\n);\n\nexport const getScrollerContentWidth = createSelector(\n  getFileDuration,\n  state => state.presentation.scrollerWidth,\n  state => state.navigation.epochSize,\n  (fileDuration, scrollerWidth, epochSize) =>\n    fileDuration * scrollerWidth / epochSize\n);\n\nexport const getSecondWidth = createSelector(\n  state => state.navigation.epochSize,\n  state => state.presentation.scrollerWidth,\n  (epochSize, scrollerWidth) => scrollerWidth / epochSize\n);\n\nexport const getSegmentWidth = createSelector(\n  getSecondWidth,\n  secondWidth => SEGMENT_DURATION * secondWidth\n);\n"],"names":["getCurrentPosition","createSelector","state","navigation","currentTime","presentation","scrollerWidth","epochSize","getCurrentSegment","Math","floor","SEGMENT_DURATION","getCurrentSegmentRange","header","currentSegment","result","dataRecordsNumber","dataRecordDuration","startSegment","max","trunc","PRELOAD_SEGMENTS","maxSegment","ceil","endSegment","min","i","push","getFileDuration","getScrollerContentWidth","fileDuration","getSecondWidth","getSegmentWidth","secondWidth"],"mappings":";;;IAGaA,qBAAqBC,eAChC;SAASC,MAAMC,UAAN,CAAiBC,WAA1B;CADgC,EAEhC;SAASF,MAAMG,YAAN,CAAmBC,aAA5B;CAFgC,EAGhC;SAASJ,MAAMC,UAAN,CAAiBI,SAA1B;CAHgC,EAIhC,UAACH,WAAD,EAAcE,aAAd,EAA6BC,SAA7B;SACED,gBAAgBF,WAAhB,GAA8BG,SADhC;CAJgC,CAA3B;;AAQP,IAAaC,oBAAoBP,eAC/B;SAASC,MAAMC,UAAN,CAAiBC,WAA1B;CAD+B,EAE/B;SAAeK,KAAKC,KAAL,CAAWN,cAAcO,gBAAzB,CAAf;CAF+B,CAA1B;;AAKP,IAAaC,yBAAyBX,eACpC;SAASC,MAAMW,MAAf;CADoC,EAEpCL,iBAFoC,EAGpC,UAACK,MAAD,EAASC,cAAT,EAA4B;MACpBC,SAAS,EAAf;;8BAE0DF,MAHhC,CAGlBG,iBAHkB;MAGlBA,iBAHkB,yCAGE,CAHF;8BAGgCH,MAHhC,CAGKI,kBAHL;MAGKA,kBAHL,yCAG0B,CAH1B;;MAIpBC,eAAeT,KAAKU,GAAL,CACnB,CADmB,EAEnBL,iBAAiBL,KAAKW,KAAL,CAAWC,mBAAmB,CAA9B,CAFE,CAArB;;MAKMC,aAAab,KAAKc,IAAL,CACjBP,oBAAoBC,kBAApB,GAAyCN,gBADxB,CAAnB;MAGMa,aAAaf,KAAKgB,GAAL,CACjBH,UADiB,EAEjBJ,eAAeG,gBAAf,GAAkC,CAFjB,CAAnB;;OAKK,IAAIK,IAAIR,YAAb,EAA2BQ,KAAKF,UAAhC,EAA4CE,GAA5C,EAAiD;WACxCC,IAAP,CAAYD,CAAZ;;;SAGKX,MAAP;CAxBkC,CAA/B;;AA4BP,IAAaa,kBAAkB3B,eAC7B;SAASC,MAAMW,MAAN,CAAaG,iBAAtB;CAD6B,EAE7B;SAASd,MAAMW,MAAN,CAAaI,kBAAtB;CAF6B,EAG7B;MAACD,iBAAD,uEAAqB,CAArB;MAAwBC,kBAAxB,uEAA6C,CAA7C;SACED,oBAAoBC,kBADtB;CAH6B,CAAxB;;AAOP,IAAaY,0BAA0B5B,eACrC2B,eADqC,EAErC;SAAS1B,MAAMG,YAAN,CAAmBC,aAA5B;CAFqC,EAGrC;SAASJ,MAAMC,UAAN,CAAiBI,SAA1B;CAHqC,EAIrC,UAACuB,YAAD,EAAexB,aAAf,EAA8BC,SAA9B;SACEuB,eAAexB,aAAf,GAA+BC,SADjC;CAJqC,CAAhC;;AAQP,IAAawB,iBAAiB9B,eAC5B;SAASC,MAAMC,UAAN,CAAiBI,SAA1B;CAD4B,EAE5B;SAASL,MAAMG,YAAN,CAAmBC,aAA5B;CAF4B,EAG5B,UAACC,SAAD,EAAYD,aAAZ;SAA8BA,gBAAgBC,SAA9C;CAH4B,CAAvB;;AAMP,IAAayB,kBAAkB/B,eAC7B8B,cAD6B,EAE7B;SAAepB,mBAAmBsB,WAAlC;CAF6B,CAAxB;;;;"}