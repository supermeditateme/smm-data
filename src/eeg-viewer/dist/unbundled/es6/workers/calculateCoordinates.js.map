{"version":3,"file":"calculateCoordinates.js","sources":["../../../../js/lib/workers/calculateCoordinates.js"],"sourcesContent":["// Synchronous pure function that calculates coordinates data.\n\nexport default function calculateCoordinates(\n  dataSegment,\n  signals,\n  channelHeight,\n  amplitude\n) {\n  const result = {};\n\n  for (let signalLabel in dataSegment) {\n    const data = dataSegment[signalLabel];\n    const dataLength = data.length;\n    const signalSegment = new Float32Array(dataLength); // TODO should try ints as well\n\n    const signalMeta = signals.find(signal => signal.label === signalLabel);\n    const digitalRange = 65535; // TODO TODO TODO signalMeta.digitalMax - signalMeta.digitalMin;\n    const scale = channelHeight / digitalRange;\n    for (let i = 0; i < dataLength; i++) {\n      signalSegment[i] = data[i] * scale * amplitude;\n    }\n\n    result[signalLabel] = signalSegment;\n  }\n\n  return result;\n}\n"],"names":["calculateCoordinates","dataSegment","signals","channelHeight","amplitude","result","signalLabel","data","dataLength","length","signalSegment","Float32Array","signalMeta","find","signal","label","digitalRange","scale","i"],"mappings":"AAAA;;AAEA,AAAe,SAASA,oBAAT,CACbC,WADa,EAEbC,OAFa,EAGbC,aAHa,EAIbC,SAJa,EAKb;MACMC,SAAS,EAAf;;6BAESC,WAHT;QAIQC,OAAON,YAAYK,WAAZ,CAAb;QACME,aAAaD,KAAKE,MAAxB;QACMC,gBAAgB,IAAIC,YAAJ,CAAiBH,UAAjB,CAAtB,CANF;;QAQQI,aAAaV,QAAQW,IAAR,CAAa;aAAUC,OAAOC,KAAP,KAAiBT,WAA3B;KAAb,CAAnB;QACMU,eAAe,KAArB,CATF;QAUQC,QAAQd,gBAAgBa,YAA9B;SACK,IAAIE,IAAI,CAAb,EAAgBA,IAAIV,UAApB,EAAgCU,GAAhC,EAAqC;oBACrBA,CAAd,IAAmBX,KAAKW,CAAL,IAAUD,KAAV,GAAkBb,SAArC;;;WAGKE,WAAP,IAAsBI,aAAtB;;;OAZG,IAAIJ,WAAT,IAAwBL,WAAxB,EAAqC;UAA5BK,WAA4B;;;SAe9BD,MAAP;;;;;"}